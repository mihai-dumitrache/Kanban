@using Kanban.Models
@using Microsoft.AspNetCore.Http
@model Kanban.Models.Task

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<script src="https://kit.fontawesome.com/d5cb6dbe34.js" crossorigin="anonymous"></script>

Task Name: @Html.DisplayFor(model => model.Title) <br />
Task Description: @Html.DisplayFor(model => model.Description) <br />
Task Status: @Html.DisplayFor(model => model.Status.StatusName) <br />
Task Creator: @Html.DisplayFor(model => model.CreatedBy.Name) <br />


<form asp-action="EditTask" method="get">
    <div class="container">

        <h1>Edit task</h1>
       
        <hr>

        <div class="form-group">
        <label asp-for="Title" class="control-label"><b>Task Title</b></label>
        <input asp-for="Title" class="form-control" type="text" id="txtTitle" /><br />
        </div>

        <div class="form-group">
        <label asp-for="Description" class="control-label"><b>Task Description</b></label>
        <input asp-for="Description" class="form-control" type="text" id="txtDescription" />
        <hr><br />
        </div>

        <div class="form-group">
        <label asp-for="Priority"><b>Task Priority</b></label>
        <select asp-for="Priority" id="Priority">
            <option value="" selected disabled hidden>Choose status</option>
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
        </select> <br />
        </div>

        <div class="form-group">
        <label asp-for="Status.StatusName"><b>Task Status</b></label>
        <select asp-for="Status.StatusName" asp-items="Model.TaskStatuses" id="Status">
            <option value="" selected disabled hidden>Task Status</option>            
        </select> <br />
        </div>

        <div class="form-group">
        <label asp-for="Responsible.EmailAdress" class="control-label"><b>Task Responsible</b></label>
        <input asp-for="Responsible.EmailAdress" class="form-control" type="text" id="txtResponsible" value="" /><i class="fa fa-user" type="button" value="@Context.Session.GetString("_Email")" id="ownUser" onclick="chooseOwn()"></i>
        <hr><br />

        <div class="has-error">
            @Html.ValidationMessage("UserNotOnBoard")
            @Html.ValidationMessage("UserNotFound")
        </div>

        </div>

        @Html.HiddenFor(model => model.Id)
        @Html.HiddenFor(model => model.Board)

        <button type="submit" class="btn btn-default" style="background-color:#f0e68c">Update task</button>
        <button type="button" onclick="location.href='@Url.Action("ViewTask","Task",new {id=Model.Id})'" style="background-color: #4CAF60">Cancel</button>
    </div>


</form>

<script  type="text/javascript"></script>
<script>
    function chooseOwn() {
        debugger;
        var var1="@Context.Session.GetString("_Email")";
        var textBox=document.getElementById("txtResponsible");
        textBox.value=var1;
        
    };
</script>